<img class="size-full wp-image-1125 alignleft" src="http://acrelinux.org/wp-content/uploads/2016/04/pdf-icon.png" alt="pdf-icon" width="128" height="128" />

Script para converter arquivo em PDF e enviar por e-mail pelo terminal.

Programas usados: Enscript, ps2pdf e sendEmail.

Tudo foi feito em um CentOS 6.7 minimal:

http://vault.centos.org/6.6/isos/i386/
http://vault.centos.org/6.6/isos/i386/CentOS-6.6-i386-minimal.iso

Requisitos:

Desabilitar o SELinux:

<a href="https://wiki.hackstore.com.br/Desabilitando_SELinux_na_fam%C3%ADlia_de_distros_baseado_em_RedHat_(RHEL,_CentOS,_Fedora)">https://wiki.hackstore.com.br</a>
<pre class="brush: bash"># vim /etc/sysconfig/selinux

Mude isso: SELINUX=enforcing
Para isso: SELINUX=disabled
</pre>
Atualizar o sistema:
<pre class="brush: bash"># yum -y update</pre>
Instalar o Enscript e o ps2pdf:
<pre class="brush: bash"># yum install enscript ghostscript</pre>
Instalar o sendEmail:<a href="http://caspian.dotconf.net/menu/Software/SendEmail/"> http://caspian.dotconf.net/menu/Software/SendEmail/</a>
<pre class="brush: bash"># yum -y install wget
# wget http://caspian.dotconf.net/menu/Software/SendEmail/sendEmail-v1.56.tar.gz
# tar -zxvf sendEmail-v1.56.tar.gz
# cp -a sendEmail-v1.56/sendEmail /usr/local/bin
# chmod +x /usr/local/bin/sendEmail
# yum install perl.x86_64 perl-Net-SSLeay perl-IO-Socket-SSL
</pre>
O pacote perl.x86_64 é importante porque se trata do interpretador Perl.
Já os pacotes perl-Net-SSLeay e perl-IO-Socket-SSL dão suporte a TLS (Transport Layer Security).

Referência: <a href="http://mytracelog.blogspot.com.br/2011/11/enviando-email-pelo-terminal-com.html">http://mytracelog.blogspot.com.br/2011/11/enviando-email-pelo-terminal-com.html</a>

Para um melhor aproveitamento o script deve ser copiado na pasta <strong>/usr/local/bin</strong> e dada permissões de execução:
<pre class="brush: bash"># chmod +x /usr/local/bin/geraPDF</pre>
No terminal utilize desta forma:
<pre class="brush: bash">$ geraPDF arquivo_desejado.txt email_para@ser_enviado.com.br</pre>

<hr />

Agora o Script.<img class="wp-image-1129 alignleft" src="http://acrelinux.org/wp-content/uploads/2016/04/terminal.png" alt="terminal" width="71" height="71" />
<pre class="brush: bash">#!/bin/bash

######################################
# Script Criado por: Daniel Gusmão   #
# Email: dangusmao@hotmail.com       #
# Site: www.danielgusmao.com.br      #
######################################

FILE=$1
EMAIL=$2
REMETENTE="email@remetente.com.br"
ASSUNTO="Segue arquivo ( ${FILE%%.*}.pdf ) Anexo"
CORPO="E-mail enviado automaticamente."
SMTP="smtp.seuprovedor.com.br:587"
USUARIO="Seu_Usuário"
SENHA="Sua_Senha"

enscript ${FILE} -o ${FILE}.ps | ps2pdf ${FILE}.ps ${FILE%%.*}.pdf

if [ ! -z ${EMAIL} ] ; then
        sendEmail -f ${REMETENTE} -t ${EMAIL} -u "${ASSUNTO}" -m "${CORPO}" -a ${FILE%%.*}.pdf -s ${SMTP} -xu ${USUARIO} -xp ${SENHA}

rm *.ps

</pre>
Copie e salve como <strong>geraPDF</strong> dentro da pasta <strong>/usr/local/bin</strong>
E dê permissão de execução
<pre class="brush: bash"># chmod +x /usr/local/bin/geraPDF</pre>
<a href="http://www.danielgusmao.com.br">www.danielgusmao.com.br</a>
